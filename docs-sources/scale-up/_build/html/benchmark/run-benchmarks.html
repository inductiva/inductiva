<!DOCTYPE html>

<html :class="{'dark': darkMode === 'dark' || (darkMode === 'system' &amp;&amp; window.matchMedia('(prefers-color-scheme: dark)').matches)}" class="scroll-smooth" data-content_root="../" lang="en" x-data="{ darkMode: localStorage.getItem('darkMode') || localStorage.setItem('darkMode', 'system'), activeSection: '' }" x-init="$watch('darkMode', val =&gt; localStorage.setItem('darkMode', val))">
<head>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<meta content="white" media="(prefers-color-scheme: light)" name="theme-color"/>
<meta content="black" media="(prefers-color-scheme: dark)" name="theme-color"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<script async="" src="https://www.googletagmanager.com/gtag/js?id=GTM-K343XQD7"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GTM-K343XQD7');
    </script>
<meta content="Run a Benchmark" property="og:title"/>
<meta content="website" property="og:type"/>
<meta content="https://inductiva.ai/guides/benchmark/run-benchmarks.html" property="og:url"/>
<meta content="Inductiva.AI Scale Up" property="og:site_name"/>
<meta content="In this tutorial, we’ll show you how to use Inductiva’s API to run a benchmark. We’ll use the SPlisHSPlasH simulator as an example, so you can follow along and learn the process step by step. The g..." property="og:description"/>
<meta content="https://inductiva.ai/builds/scale-up/_static/inductiva-social-banner.jpg" property="og:image"/>
<meta content="Inductiva.AI Scale Up" property="og:image:alt"/>
<meta content="In this tutorial, we’ll show you how to use Inductiva’s API to run a benchmark. We’ll use the SPlisHSPlasH simulator as an example, so you can follow along and learn the process step by step. The g..." name="description"/>
<title>Run a Benchmark | Scale Up</title>
<meta content="Run a Benchmark | Scale Up" property="og:title"/>
<meta content="Run a Benchmark | Scale Up" name="twitter:title"/>
<link href="../_static/pygments.css?v=b20cc3f5" rel="stylesheet" type="text/css"/>
<link href="../_static/theme.css?v=42baaae4" rel="stylesheet" type="text/css"/>
<link href="../_static/togglebutton.css?v=13237357" rel="stylesheet" type="text/css"/>
<link href="../_static/css/custom.css?v=786cbf66" rel="stylesheet" type="text/css"/>
<link href="../_static/css/enable_sidebar_focus.css?v=42d151db" rel="stylesheet" type="text/css"/>
<link href="../_static/css/banner.css?v=57ab4db2" rel="stylesheet" type="text/css"/>
<link href="https://inductiva.ai/guides/scale-up/benchmark/run-benchmarks.html" rel="canonical"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="monitor-live.html" rel="next" title="Check Progress &amp; Results"/>
<link href="why-benchmarks.html" rel="prev" title="Why Benchmark"/>
<script>
    <!-- Prevent Flash of wrong theme -->
      const userPreference = localStorage.getItem('darkMode');
      let mode;
      if (userPreference === 'dark' || window.matchMedia('(prefers-color-scheme: dark)').matches) {
        mode = 'dark';
        document.documentElement.classList.add('dark');
      } else {
        mode = 'light';
      }
      if (!userPreference) {localStorage.setItem('darkMode', mode)}
    </script>
</head>
<body :class="{ 'overflow-hidden': showSidebar }" @scroll.window="showScrollTop = pageYOffset &gt; 100" class="min-h-screen font-sans antialiased bg-background text-foreground" x-data="{ showSidebar: false, showScrollTop: false }">
<div @click.self="showSidebar = false" class="fixed inset-0 z-50 overflow-hidden bg-background/80 backdrop-blur-sm md:hidden" x-cloak="" x-show="showSidebar"></div><div class="relative flex flex-col min-h-screen" id="page"><a class="absolute top-0 left-0 z-[100] block bg-background p-4 text-xl transition -translate-x-full opacity-0 focus:translate-x-0 focus:opacity-100" href="#content">
      Skip to content
    </a><header class="sticky top-0 z-40 w-full border-b shadow-sm border-border supports-backdrop-blur:bg-background/60 bg-background/95 backdrop-blur"><div class="container flex items-center h-14">
<div class="hidden mr-4 md:flex">
<a class="flex items-center mr-6" href="../index.html"><span class="hidden font-bold sm:inline-block text-clip whitespace-nowrap">Scale Up</span>
</a></div><button @click="showSidebar = true" class="inline-flex items-center justify-center h-10 px-0 py-2 mr-2 text-base font-medium transition-colors rounded-md hover:text-accent-foreground hover:bg-transparent md:hidden" type="button">
<svg aria-hidden="true" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M152.587 825.087q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440Zm0-203.587q-19.152 0-32.326-13.174T107.087 576q0-19.152 13.174-32.326t32.326-13.174h320q19.152 0 32.326 13.174T518.087 576q0 19.152-13.174 32.326T472.587 621.5h-320Zm0-203.587q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440ZM708.913 576l112.174 112.174q12.674 12.674 12.674 31.826t-12.674 31.826Q808.413 764.5 789.261 764.5t-31.826-12.674l-144-144Q600 594.391 600 576t13.435-31.826l144-144q12.674-12.674 31.826-12.674t31.826 12.674q12.674 12.674 12.674 31.826t-12.674 31.826L708.913 576Z"></path>
</svg>
<span class="sr-only">Toggle navigation menu</span>
</button>
<div class="flex items-center justify-between flex-1 space-x-2 sm:space-x-4 md:justify-end">
<div class="flex-1 w-full md:w-auto md:flex-none"><form @keydown.k.window.meta="$refs.search.focus()" action="../search.html" class="relative flex items-center group" id="searchbox" method="get">
<input aria-label="Search the docs" class="inline-flex items-center font-medium transition-colors bg-transparent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ring-offset-background border border-input hover:bg-accent focus:bg-accent hover:text-accent-foreground focus:text-accent-foreground hover:placeholder-accent-foreground py-2 px-4 relative h-9 w-full justify-start rounded-[0.5rem] text-sm text-muted-foreground sm:pr-12 md:w-40 lg:w-64" id="search-input" name="q" placeholder="Search ..." type="search" x-ref="search"/>
<kbd class="pointer-events-none absolute right-1.5 top-2 hidden h-5 select-none text-muted-foreground items-center gap-1 rounded border border-border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex group-hover:bg-accent group-hover:text-accent-foreground">
<span class="text-xs">⌘</span>
    K
  </kbd>
</form>
</div>
<nav class="flex items-center space-x-1">
<button @click="darkMode = darkMode === 'light' ? 'dark' : 'light'" aria-label="Color theme switcher" class="relative inline-flex items-center justify-center px-0 text-sm font-medium transition-colors rounded-md hover:bg-accent hover:text-accent-foreground h-9 w-9" type="button">
<svg class="absolute transition-all scale-100 rotate-0 dark:-rotate-90 dark:scale-0" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 685q45.456 0 77.228-31.772Q589 621.456 589 576q0-45.456-31.772-77.228Q525.456 467 480 467q-45.456 0-77.228 31.772Q371 530.544 371 576q0 45.456 31.772 77.228Q434.544 685 480 685Zm0 91q-83 0-141.5-58.5T280 576q0-83 58.5-141.5T480 376q83 0 141.5 58.5T680 576q0 83-58.5 141.5T480 776ZM80 621.5q-19.152 0-32.326-13.174T34.5 576q0-19.152 13.174-32.326T80 530.5h80q19.152 0 32.326 13.174T205.5 576q0 19.152-13.174 32.326T160 621.5H80Zm720 0q-19.152 0-32.326-13.174T754.5 576q0-19.152 13.174-32.326T800 530.5h80q19.152 0 32.326 13.174T925.5 576q0 19.152-13.174 32.326T880 621.5h-80Zm-320-320q-19.152 0-32.326-13.174T434.5 256v-80q0-19.152 13.174-32.326T480 130.5q19.152 0 32.326 13.174T525.5 176v80q0 19.152-13.174 32.326T480 301.5Zm0 720q-19.152 0-32.326-13.17Q434.5 995.152 434.5 976v-80q0-19.152 13.174-32.326T480 850.5q19.152 0 32.326 13.174T525.5 896v80q0 19.152-13.174 32.33-13.174 13.17-32.326 13.17ZM222.174 382.065l-43-42Q165.5 327.391 166 308.239t13.174-33.065q13.435-13.674 32.587-13.674t32.065 13.674l42.239 43q12.674 13.435 12.555 31.706-.12 18.272-12.555 31.946-12.674 13.674-31.445 13.413-18.772-.261-32.446-13.174Zm494 494.761-42.239-43q-12.674-13.435-12.674-32.087t12.674-31.565Q686.609 756.5 705.38 757q18.772.5 32.446 13.174l43 41.761Q794.5 824.609 794 843.761t-13.174 33.065Q767.391 890.5 748.239 890.5t-32.065-13.674Zm-42-494.761Q660.5 369.391 661 350.62q.5-18.772 13.174-32.446l41.761-43Q728.609 261.5 747.761 262t33.065 13.174q13.674 13.435 13.674 32.587t-13.674 32.065l-43 42.239q-13.435 12.674-31.706 12.555-18.272-.12-31.946-12.555Zm-495 494.761Q165.5 863.391 165.5 844.239t13.674-32.065l43-42.239q13.435-12.674 32.087-12.674t31.565 12.674Q299.5 782.609 299 801.38q-.5 18.772-13.174 32.446l-41.761 43Q231.391 890.5 212.239 890t-33.065-13.174ZM480 576Z"></path>
</svg>
<svg class="absolute transition-all scale-0 rotate-90 dark:rotate-0 dark:scale-100" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 936q-151 0-255.5-104.5T120 576q0-138 90-239.5T440 218q25-3 39 18t-1 44q-17 26-25.5 55t-8.5 61q0 90 63 153t153 63q31 0 61.5-9t54.5-25q21-14 43-1.5t19 39.5q-14 138-117.5 229T480 936Zm0-80q88 0 158-48.5T740 681q-20 5-40 8t-40 3q-123 0-209.5-86.5T364 396q0-20 3-40t8-40q-78 32-126.5 102T200 576q0 116 82 198t198 82Zm-10-270Z"></path>
</svg>
</button>
</nav>
</div>
</div>
</header>
<div class="flex-1"><div class="container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10"><aside :aria-hidden="!showSidebar" :class="{ 'translate-x-0': showSidebar }" class="fixed inset-y-0 left-0 md:top-14 z-50 md:z-30 bg-background md:bg-transparent transition-all duration-100 -translate-x-full md:translate-x-0 ml-0 p-6 md:p-0 md:-ml-2 md:h-[calc(100vh-3.5rem)] w-5/6 md:w-full shrink-0 overflow-y-auto border-r border-border md:sticky" id="left-sidebar">
<a class="!justify-start text-sm md:!hidden bg-background" href="../index.html"><span class="font-bold text-clip whitespace-nowrap">Scale Up</span>
</a>
<div class="relative overflow-hidden md:overflow-auto my-4 md:my-0 h-[calc(100vh-8rem)] md:h-auto">
<div class="overflow-y-auto h-full w-full relative pr-6"><nav class="table w-full min-w-full my-6 lg:my-8">
<p class="caption" role="heading"><span class="caption-text">Parallel Simulations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../parallel-simulations/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel-simulations/run-parallel-simulations.html">Parallel Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel-simulations/templating.html">Templating</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel-simulations/run-parallel-simulations-with-templating.html">Parallel Simulations with Templating</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel-simulations/set-up-elastic-machine-group.html">Set up an Elastic Machine Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel-simulations/set-up-mpi-cluster.html">Set up an MPI Cluster</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../projects/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/manage-projects.html">Manage Programmatically</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/visualize-projects.html">Manage in the Web Console</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Save Costs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../save-costs/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../save-costs/save_storage.html">Minimize simulation data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Recipes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/reuse-files.html">♻️ Reuse Files Across Multiple Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/download-file-from-project.html">⬇️ Download specific files from a group of tasks</a></li>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../recipes/storage-related/index.html">🗑️ Clean Up Storage by Condition<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../recipes/storage-related/sections/delete-failed-tasks.html">Delete failed tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/storage-related/sections/delete-old-tasks.html">Delete old tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/storage-related/sections/delete-project-tasks.html">Delete Project tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/storage-related/sections/delete-unwanted-files.html">Cleaning Up After Simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/storage-related/sections/download-and-delete.html">Download + Delete</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/storage-related/sections/find-large-tasks.html">Find Large projects or tasks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/real-time-simulation-monitoring.html">👀 Real-Time Monitoring &amp; Conditional Auto Termination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/set-task-ttl/set-task-ttl.html">⏰ Setting a Time-to-Live on Your Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/observer-events.html">📨 Simulation Notifications via Observer Events</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Generate Dataset</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../generate-dataset/generate-dataset.html">🧪 Generate a Dataset</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Benchmarks</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarking.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="why-benchmarks.html">Why Benchmark</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run a Benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitor-live.html">Check Progress &amp; Results</a></li>
</ul>
</nav>
</div>
</div>
<button @click="showSidebar = false" class="absolute md:hidden right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100" type="button">
<svg class="h-4 w-4" fill="currentColor" height="24" stroke="none" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 632 284 828q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536 576l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480 632Z"></path>
</svg>
</button>
</aside>
<main class="relative py-6 lg:gap-10 lg:py-8 xl:grid xl:grid-cols-[1fr_300px]">
<div class="w-full min-w-0 mx-auto">
<nav aria-label="breadcrumbs" class="flex items-center mb-4 space-x-1 text-sm text-muted-foreground">
<a class="overflow-hidden text-ellipsis whitespace-nowrap hover:text-foreground" href="../index.html">
<span class="hidden md:inline">Scale Up</span>
<svg aria-label="Home" class="md:hidden" fill="currentColor" height="18" stroke="none" viewbox="0 96 960 960" width="18" xmlns="http://www.w3.org/2000/svg">
<path d="M240 856h120V616h240v240h120V496L480 316 240 496v360Zm-80 80V456l320-240 320 240v480H520V696h-80v240H160Zm320-350Z"></path>
</svg>
</a>
<div class="mr-1">/</div><span aria-current="page" class="font-medium text-foreground overflow-hidden text-ellipsis whitespace-nowrap">Run a Benchmark</span>
</nav>
<div id="content" role="main">
<section class="tex2jax_ignore mathjax_ignore" id="run-a-benchmark">
<h1>Run a Benchmark<a class="headerlink" href="#run-a-benchmark" title="Link to this heading"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h1>
<p>In this tutorial, we’ll show you how to use Inductiva’s API to run a benchmark.
We’ll use the <a class="reference external" href="https://inductiva.ai/guides/splishsplash" rel="noreferer noopener" target="_blank">SPlisHSPlasH simulator</a>
as an example, so you can follow along and learn the process step by step.</p>
<p>The goal is to find the best machine that balances computation time and cost.
After running the benchmarks, we’ll analyze and visualize the results to make an
informed choice.</p>
<section id="what-youll-learn">
<h2>What You’ll Learn<a class="headerlink" href="#what-youll-learn" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#what-youll-learn'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>In this tutorial, you’ll learn how to:</p>
<ul class="simple">
<li><p>Download and prepare the necessary input files for the simulation.</p></li>
<li><p>Set up the benchmark.</p></li>
<li><p>Refine the code to reduce code redundancy and save benchmark costs.</p></li>
<li><p>Export the benchmark results.</p></li>
</ul>
<p>Let’s dive in!</p>
</section>
<section id="step-1-download-the-files">
<h2>Step 1: Download the Files<a class="headerlink" href="#step-1-download-the-files" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#step-1-download-the-files'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>Before we start benchmarking, we need to download the necessary input files
for the SPlisHSPlasH simulator. These files include the configuration and
assets required to run the simulations.</p>
<p>The code snippet below downloads the required simulation files to your working
directory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">import</span> <span class="nn">inductiva</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">inductiva</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">download_from_url</span><span class="p">(</span>
</span><span id="line-4">    <span class="n">url</span><span class="o">=</span><span class="s2">"https://tutorials.inductiva.ai/_static/generating-synthetic-data/splishsplash-base-dir.zip"</span><span class="p">,</span>
</span><span id="line-5">    <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
</div>
<p>Now you’re set to proceed with setting up the benchmark!</p>
</section>
<section id="step-2-configure-and-run-the-benchmark">
<h2>Step 2: Configure and Run the Benchmark<a class="headerlink" href="#step-2-configure-and-run-the-benchmark" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#step-2-configure-and-run-the-benchmark'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>Now that we have the necessary input files, let’s set up and execute the benchmark.
We need to configure the benchmarking parameters, specify the machine types, and
run the benchmark multiple times to ensure reliable results.</p>
<p>Here’s a look at the process:</p>
<p><strong>1- Identify the Benchmark</strong></p>
<p>Use <code class="docutils literal notranslate"><span class="pre">benchmarks.Benchmark()</span></code> to assign a name to the benchmark (e.g., <code class="docutils literal notranslate"><span class="pre">splishsplash-fluid-cube</span></code>) <em>This name helps you track the benchmark results.</em></p>
<p><strong>2- Add Simulation Runs</strong></p>
<p>Add individual runs using the <code class="docutils literal notranslate"><span class="pre">.add_run()</span></code> method.</p>
<p>For each run, specify:</p>
<ul class="simple">
<li><p>Simulator: The <code class="docutils literal notranslate"><span class="pre">simulators.SplishSplash()</span></code> simulator for fluid dynamics.</p></li>
<li><p>Input Directory: Path to the input files (“splishsplash-base-dir”) downloaded in Step 1.</p></li>
<li><p>Configuration File: Use the <code class="docutils literal notranslate"><span class="pre">config.json</span></code> file to define simulation parameters.</p></li>
<li><p>Machine Type: Specify the machine type and configuration (e.g., <code class="docutils literal notranslate"><span class="pre">c2-standard-4</span></code>, <code class="docutils literal notranslate"><span class="pre">c3-standard-44</span></code>) using <code class="docutils literal notranslate"><span class="pre">resources.MachineGroup</span></code>.</p></li>
</ul>
<p><strong>3- Run the Benchmark</strong></p>
<p>Use <code class="docutils literal notranslate"><span class="pre">.run(num_repeats=2)</span></code> to execute all added runs, repeating each one twice.
<em>Repeating runs helps ensure consistent and reliable performance metrics.</em></p>
<p>The following code example demonstrates the setup for testing <code class="docutils literal notranslate"><span class="pre">c2-standard</span></code> and
<code class="docutils literal notranslate"><span class="pre">c3-standard</span></code> machines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">inductiva</span> <span class="kn">import</span> <span class="n">benchmarks</span><span class="p">,</span> <span class="n">simulators</span><span class="p">,</span> <span class="n">resources</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">benchmarks</span><span class="o">.</span><span class="n">Benchmark</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"splishsplash-fluid-cube"</span><span class="p">)</span> \
</span><span id="line-4">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-5">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-6">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-7">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-4"</span><span class="p">))</span> \
</span><span id="line-8">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-9">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>             
</span><span id="line-10">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-11">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-8"</span><span class="p">))</span> \
</span><span id="line-12">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-13">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>             
</span><span id="line-14">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-15">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-16"</span><span class="p">))</span> \
</span><span id="line-16">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-17">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-18">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-19">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-30"</span><span class="p">))</span> \
</span><span id="line-20">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-21">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-22">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-23">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-60"</span><span class="p">))</span> \
</span><span id="line-24">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-25">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-26">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-27">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-4"</span><span class="p">))</span> \
</span><span id="line-28">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-29">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-30">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-31">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-8"</span><span class="p">))</span> \
</span><span id="line-32">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-33">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-34">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-35">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-22"</span><span class="p">))</span> \
</span><span id="line-36">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-37">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-38">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-39">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-44"</span><span class="p">))</span> \
</span><span id="line-40">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-41">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-42">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-43">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-88"</span><span class="p">))</span> \
</span><span id="line-44">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-45">             <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-46">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-47">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-176"</span><span class="p">))</span> \
</span><span id="line-48">    <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">num_repeats</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></code></pre></div>
</div>
<div class="cta-bar">
<div class="cta-text" style="text-align: center">
                    ...
                </div>
<button class="cta-button" id="login-btn-small" onclick="openInductivaRegister('benchmarks_run_benchmark')">...</button>
</div>
<script>
            function openInductivaRegister(origin) {
                // Current URL query string, including '?'
                const params = new URL(window.parent.location.href).search;
                const parentPath = new URL(window.parent.location.href).pathname;
                
                // Replace "/" with "_", remove leading/trailing underscores if any
                const utmPath = parentPath.replace(/\//g, '_').replace(/^_+|_+$/g, '');
                
                // Get referrer domain only, remove protocol and www
                let referrerDomain = '';
                try {
                    const refUrl = new URL(window.parent.document.referrer);
                    referrerDomain = refUrl.hostname.replace(/^www\./, ''); // Remove www.
                } catch (e) {
                    // If referrer is empty or invalid, leave as empty string
                    referrerDomain = '';
                }

                // Sanitize: allow only alphanumerics, "-", "_", "."
                const utmReferrer = encodeURIComponent(referrerDomain.replace(/[^a-zA-Z0-9_\-\.]/g, '_'));

                const baseUrl = 'https://console.inductiva.ai/api/register?utm_cta_origin=guide_' 
                    + origin + '&utm_path=' + encodeURIComponent(utmPath)
                    + '&utm_ref=' + utmReferrer;

                const url = params
                    ? baseUrl + '&' + params.slice(1)  // Remove the initial '?' and prepend '&'
                    : baseUrl;

                console.log("[BannerSmall] Opening URL:", url);
                window.open(url, '_blank');
            }
            </script>
</section>
<section id="step-3-refine-the-code">
<h2>Step 3: Refine the Code<a class="headerlink" href="#step-3-refine-the-code" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#step-3-refine-the-code'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>As we add more machine types to the benchmark, the code can become repetitive and overwhelming. We need to sort the data out to make it easier to read and to ensure the benchmark setup remains concise, clear, and adaptable.</p>
<section id="improve-data-readability">
<h3>Improve Data Readability<a class="headerlink" href="#improve-data-readability" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#improve-data-readability'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<section id="simplifying-the-code-with-set-default">
<h4>1. Simplifying the Code with <code class="docutils literal notranslate"><span class="pre">set_default</span></code><a class="headerlink" href="#simplifying-the-code-with-set-default" title="Link to this heading"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h4>
<p>To make it cleaner and easier to manage, we can use the <code class="docutils literal notranslate"><span class="pre">set_default</span></code> method to define shared parameters like the simulator, input directory, and configuration file in one place. This reduces duplication and improves readability.</p>
<p>Here’s the updated code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">inductiva</span> <span class="kn">import</span> <span class="n">benchmarks</span><span class="p">,</span> <span class="n">simulators</span><span class="p">,</span> <span class="n">resources</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">benchmarks</span><span class="o">.</span><span class="n">Benchmark</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"splishsplash-fluid-cube"</span><span class="p">)</span> \
</span><span id="line-4">    <span class="o">.</span><span class="n">set_default</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-5">                 <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-6">                 <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">)</span> \
</span><span id="line-7">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-4"</span><span class="p">))</span> \
</span><span id="line-8">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-8"</span><span class="p">))</span> \
</span><span id="line-9">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-16"</span><span class="p">))</span> \
</span><span id="line-10">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-30"</span><span class="p">))</span> \
</span><span id="line-11">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c2-standard-60"</span><span class="p">))</span> \
</span><span id="line-12">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-4"</span><span class="p">))</span> \
</span><span id="line-13">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-8"</span><span class="p">))</span> \
</span><span id="line-14">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-22"</span><span class="p">))</span> \
</span><span id="line-15">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-44"</span><span class="p">))</span> \
</span><span id="line-16">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-88"</span><span class="p">))</span> \
</span><span id="line-17">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="s2">"c3-standard-176"</span><span class="p">))</span> \
</span><span id="line-18">    <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">num_repeats</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></code></pre></div>
</div>
</section>
<section id="using-a-for-loop-for-machine-types">
<h4>2. Using a <code class="docutils literal notranslate"><span class="pre">for</span></code> Loop for Machine Types<a class="headerlink" href="#using-a-for-loop-for-machine-types" title="Link to this heading"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h4>
<p>To simplify even further, we can define a list of machine types and use a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop to programmatically add runs. This not only reduces the number of lines but also makes it easier to scale if more machine types are added later.</p>
<p>Here’s the updated code with a loop:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">inductiva</span> <span class="kn">import</span> <span class="n">benchmarks</span><span class="p">,</span> <span class="n">simulators</span><span class="p">,</span> <span class="n">resources</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">benchmark</span> <span class="o">=</span> <span class="n">benchmarks</span><span class="o">.</span><span class="n">Benchmark</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"splishsplash-fluid-cube"</span><span class="p">)</span> \
</span><span id="line-4">    <span class="o">.</span><span class="n">set_default</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-5">                 <span class="n">input_dir</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-6">                 <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">)</span>
</span><span id="line-7">
</span><span id="line-8"><span class="n">machine_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"c2-standard-4"</span><span class="p">,</span> <span class="s2">"c2-standard-8"</span><span class="p">,</span> <span class="s2">"c2-standard-16"</span><span class="p">,</span>
</span><span id="line-9">                 <span class="s2">"c2-standard-30"</span><span class="p">,</span> <span class="s2">"c2-standard-60"</span><span class="p">,</span> <span class="s2">"c3-standard-4"</span><span class="p">,</span>
</span><span id="line-10">                 <span class="s2">"c3-standard-8"</span><span class="p">,</span> <span class="s2">"c3-standard-22"</span><span class="p">,</span> <span class="s2">"c3-standard-44"</span><span class="p">,</span>
</span><span id="line-11">                 <span class="s2">"c3-standard-88"</span><span class="p">,</span> <span class="s2">"c3-standard-176"</span><span class="p">]</span>
</span><span id="line-12">
</span><span id="line-13"><span class="k">for</span> <span class="n">machine_type</span> <span class="ow">in</span> <span class="n">machine_types</span><span class="p">:</span>
</span><span id="line-14">    <span class="n">benchmark</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="n">machine_type</span><span class="p">))</span>
</span><span id="line-15">
</span><span id="line-16"><span class="n">benchmark</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">num_repeats</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></code></pre></div>
</div>
</section>
</section>
<section id="optimizing-the-benchmark-program">
<h3>Optimizing the Benchmark Program<a class="headerlink" href="#optimizing-the-benchmark-program" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#optimizing-the-benchmark-program'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>We can optimize how the benchmark program manages input files, machine resources,
and execution parameters to reduce computation time and cost. This step ensures
the program runs efficiently while avoiding unnecessary resource usage.</p>
<p><strong>1. Reuse Input Files Across Runs</strong></p>
<p>Uploading input files for every run can waste time and resources. Instead, we
upload the files once to a GCP bucket and reuse them for all subsequent runs.
We’ve already covered this feature in detail in a tutorial
on <a class="reference external" href="https://inductiva.ai/guides/scale-up/recipes/reuse-files" rel="noreferer noopener" target="_blank">How to Reuse Input Files Across Runs</a>, so feel free to check it out for a detailed walkthrough.</p>
<p><strong>Upload Files to a GCP Bucket</strong></p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">inductiva.storage.upload</span></code> function to upload the input files to a GCP bucket:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">import</span> <span class="nn">inductiva</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">inductiva</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">local_path</span><span class="o">=</span><span class="s2">"splishsplash-base-dir"</span><span class="p">,</span>
</span><span id="line-4">                         <span class="n">remote_dir</span><span class="o">=</span><span class="s2">"splishsplash-input-dir"</span><span class="p">)</span>
</span></code></pre></div>
</div>
<p>This stores the input files in the <code class="docutils literal notranslate"><span class="pre">splishsplash-input-dir</span></code> bucket, making them
accessible to all runs.</p>
<p><strong>Configure the Benchmark to Use Remote Files</strong></p>
<p>Update the benchmark configuration to use the uploaded files by specifying the <code class="docutils literal notranslate"><span class="pre">remote_assets</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">set_default</span></code>. Remove the <code class="docutils literal notranslate"><span class="pre">input_dir</span></code> parameter since the files are now accessed remotely:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># ...</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">benchmark</span> <span class="o">=</span> <span class="n">benchmarks</span><span class="o">.</span><span class="n">Benchmark</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"splishsplash-fluid-cube"</span><span class="p">)</span> \
</span><span id="line-4">    <span class="o">.</span><span class="n">set_default</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-5">                 <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-6">                 <span class="n">remote_assets</span><span class="o">=</span><span class="p">[</span><span class="s2">"splishsplash-input-dir"</span><span class="p">])</span>
</span><span id="line-7">
</span><span id="line-8"><span class="c1"># ...</span>
</span></code></pre></div>
</div>
<p><strong>2. Parallelize Benchmark Execution</strong></p>
<p>To speed up benchmark execution, run multiple repetitions in parallel by setting the <code class="docutils literal notranslate"><span class="pre">num_machines</span></code> parameter equal to the number of repetitions (<code class="docutils literal notranslate"><span class="pre">num_repeats</span></code>). Each machine in the group will handle one repetition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># ...</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">num_repeats</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="line-4">
</span><span id="line-5"><span class="k">for</span> <span class="n">machine_type</span> <span class="ow">in</span> <span class="n">machine_types</span><span class="p">:</span>
</span><span id="line-6">    <span class="n">benchmark</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="n">machine_type</span><span class="o">=</span><span class="n">machine_type</span><span class="p">,</span>
</span><span id="line-7">                                                <span class="n">num_machines</span><span class="o">=</span><span class="n">num_repeats</span><span class="p">))</span>
</span><span id="line-8">
</span><span id="line-9">
</span><span id="line-10"><span class="c1"># ...</span>
</span></code></pre></div>
</div>
<p>This ensures simulations are distributed across multiple machines, significantly reducing runtime.</p>
<p><strong>3. Minimize Idle Time</strong></p>
<p>Idle resources increase costs. To avoid this, set a maximum idle time for each machine to avoid wasting computational resources and, as a result, decrease the benchmark cost. Here’s how to configure it with <code class="docutils literal notranslate"><span class="pre">max_idle_time</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># ...</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">max_idle_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</span><span id="line-4">
</span><span id="line-5"><span class="k">for</span> <span class="n">machine_type</span> <span class="ow">in</span> <span class="n">machine_types</span><span class="p">:</span>
</span><span id="line-6">    <span class="n">benchmark</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="n">machine_type</span><span class="o">=</span><span class="n">machine_type</span><span class="p">,</span>
</span><span id="line-7">                                                <span class="n">num_machines</span><span class="o">=</span><span class="n">num_repeats</span><span class="p">,</span>
</span><span id="line-8">                                                <span class="n">max_idle_time</span><span class="o">=</span><span class="n">max_idle_time</span><span class="p">))</span>
</span><span id="line-9">
</span><span id="line-10"><span class="c1"># ...</span>
</span></code></pre></div>
</div>
<p><strong>Note:</strong> Reducing idle time too much may cause errors if the simulations cannot be submitted quickly enough. Adjust the value based on your setup.</p>
<p><strong>4. Use Quotas Wisely</strong></p>
<p>Consider enabling <code class="docutils literal notranslate"><span class="pre">wait_for_quotas=True</span></code> in <code class="docutils literal notranslate"><span class="pre">run()</span></code> to ensure your simulation runs without quota issues.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># Handle resource quotas gracefully</span>
</span><span id="line-2"><span class="n">benchmark</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">num_repeats</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">wait_for_quotas</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
</div>
<p>Here is the final, optimized, and refactored version of the benchmark program:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">import</span> <span class="nn">datetime</span>
</span><span id="line-2"><span class="kn">from</span> <span class="nn">inductiva</span> <span class="kn">import</span> <span class="n">benchmarks</span><span class="p">,</span> <span class="n">simulators</span><span class="p">,</span> <span class="n">resources</span>
</span><span id="line-3">
</span><span id="line-4"><span class="n">benchmark</span> <span class="o">=</span> <span class="n">benchmarks</span><span class="o">.</span><span class="n">Benchmark</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"splishsplash-fluid-cube"</span><span class="p">)</span> \
</span><span id="line-5">    <span class="o">.</span><span class="n">set_default</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-6">                 <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-7">                 <span class="n">remote_assets</span><span class="o">=</span><span class="p">[</span><span class="s2">"splishsplash-input-dir"</span><span class="p">])</span>
</span><span id="line-8">
</span><span id="line-9"><span class="n">machine_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"c2-standard-4"</span><span class="p">,</span> <span class="s2">"c2-standard-8"</span><span class="p">,</span> <span class="s2">"c2-standard-16"</span><span class="p">,</span>
</span><span id="line-10">                 <span class="s2">"c2-standard-30"</span><span class="p">,</span> <span class="s2">"c2-standard-60"</span><span class="p">,</span> <span class="s2">"c3-standard-4"</span><span class="p">,</span>
</span><span id="line-11">                 <span class="s2">"c3-standard-8"</span><span class="p">,</span> <span class="s2">"c3-standard-22"</span><span class="p">,</span> <span class="s2">"c3-standard-44"</span><span class="p">,</span>
</span><span id="line-12">                 <span class="s2">"c3-standard-88"</span><span class="p">,</span> <span class="s2">"c3-standard-176"</span><span class="p">]</span>
</span><span id="line-13">
</span><span id="line-14"><span class="n">num_repeats</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="line-15">
</span><span id="line-16"><span class="n">max_idle_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</span><span id="line-17">
</span><span id="line-18"><span class="k">for</span> <span class="n">machine_type</span> <span class="ow">in</span> <span class="n">machine_types</span><span class="p">:</span>
</span><span id="line-19">    <span class="n">benchmark</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="n">machine_type</span><span class="o">=</span><span class="n">machine_type</span><span class="p">,</span>
</span><span id="line-20">                                                <span class="n">num_machines</span><span class="o">=</span><span class="n">num_repeats</span><span class="p">,</span>
</span><span id="line-21">                                                <span class="n">max_idle_time</span><span class="o">=</span><span class="n">max_idle_time</span><span class="p">))</span>
</span><span id="line-22">
</span><span id="line-23"><span class="n">benchmark</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">num_repeats</span><span class="o">=</span><span class="n">num_repeats</span><span class="p">,</span> <span class="n">wait_for_quotas</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
</div>
<div class="cta-bar">
<div class="cta-text" style="text-align: center">
                    ...
                </div>
<button class="cta-button" id="login-btn-small" onclick="openInductivaRegister('benchmarks_run_benchmark_refined')">...</button>
</div>
<script>
            function openInductivaRegister(origin) {
                // Current URL query string, including '?'
                const params = new URL(window.parent.location.href).search;
                const parentPath = new URL(window.parent.location.href).pathname;
                
                // Replace "/" with "_", remove leading/trailing underscores if any
                const utmPath = parentPath.replace(/\//g, '_').replace(/^_+|_+$/g, '');
                
                // Get referrer domain only, remove protocol and www
                let referrerDomain = '';
                try {
                    const refUrl = new URL(window.parent.document.referrer);
                    referrerDomain = refUrl.hostname.replace(/^www\./, ''); // Remove www.
                } catch (e) {
                    // If referrer is empty or invalid, leave as empty string
                    referrerDomain = '';
                }

                // Sanitize: allow only alphanumerics, "-", "_", "."
                const utmReferrer = encodeURIComponent(referrerDomain.replace(/[^a-zA-Z0-9_\-\.]/g, '_'));

                const baseUrl = 'https://console.inductiva.ai/api/register?utm_cta_origin=guide_' 
                    + origin + '&utm_path=' + encodeURIComponent(utmPath)
                    + '&utm_ref=' + utmReferrer;

                const url = params
                    ? baseUrl + '&' + params.slice(1)  // Remove the initial '?' and prepend '&'
                    : baseUrl;

                console.log("[BannerSmall] Opening URL:", url);
                window.open(url, '_blank');
            }
            </script>
</section>
</section>
<section id="step-4-export-the-benchmark-data-to-a-file">
<h2>Step 4: Export the Benchmark Data to a File<a class="headerlink" href="#step-4-export-the-benchmark-data-to-a-file" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#step-4-export-the-benchmark-data-to-a-file'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>Once the benchmark is complete, you’ll want to save the results for analysis.
In this step, we’ll export the benchmark data to a CSV file. Additionally,
we’ll ensure all benchmark-related tasks are finished and resources are properly
terminated.</p>
<p><strong>1- Exporting the Benchmark Data</strong></p>
<p>The benchmark results can be exported to a file using the <code class="docutils literal notranslate"><span class="pre">export</span></code> method.
This allows you to filter the data and customize the output format.</p>
<p>For this example, we’ll:</p>
<ol class="arabic simple">
<li><p>Export the results of the benchmark named <code class="docutils literal notranslate"><span class="pre">splishsplash-fluid-cube</span></code>.</p></li>
<li><p>Save only successful tasks (<code class="docutils literal notranslate"><span class="pre">status="success"</span></code>).</p></li>
<li><p>Include only attributes and metrics that vary between runs (<code class="docutils literal notranslate"><span class="pre">select="distinct"</span></code>).</p></li>
<li><p>Save the results in a file named <code class="docutils literal notranslate"><span class="pre">benchmark.csv</span></code>.</p></li>
</ol>
<p><strong>2- Completing the Benchmark Process</strong></p>
<p>Before exporting the data, it’s important to ensure:</p>
<ol class="arabic simple">
<li><p>All benchmark-related tasks are completed using the <code class="docutils literal notranslate"><span class="pre">wait()</span></code> method.</p></li>
<li><p>All resources used during the benchmark are terminated to avoid unnecessary
charges by calling <code class="docutils literal notranslate"><span class="pre">terminate()</span></code>.</p></li>
</ol>
<p>Here’s the full code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">inductiva</span> <span class="kn">import</span> <span class="n">benchmarks</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">benchmarks</span><span class="o">.</span><span class="n">Benchmark</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"splishsplash-fluid-cube"</span><span class="p">)</span> \
</span><span id="line-4">    <span class="o">.</span><span class="n">wait</span><span class="p">()</span> \
</span><span id="line-5">    <span class="o">.</span><span class="n">terminate</span><span class="p">()</span> \
</span><span id="line-6">    <span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">"csv"</span><span class="p">,</span>
</span><span id="line-7">            <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span>
</span><span id="line-8">            <span class="n">select</span><span class="o">=</span><span class="s2">"distinct"</span><span class="p">,</span>
</span><span id="line-9">            <span class="n">filename</span><span class="o">=</span><span class="s2">"benchmark.csv"</span><span class="p">)</span>
</span></code></pre></div>
</div>
<div class="cta-bar">
<div class="cta-text" style="text-align: center">
                    ...
                </div>
<button class="cta-button" id="login-btn-small" onclick="openInductivaRegister('benchmarks_export_data')">...</button>
</div>
<script>
            function openInductivaRegister(origin) {
                // Current URL query string, including '?'
                const params = new URL(window.parent.location.href).search;
                const parentPath = new URL(window.parent.location.href).pathname;
                
                // Replace "/" with "_", remove leading/trailing underscores if any
                const utmPath = parentPath.replace(/\//g, '_').replace(/^_+|_+$/g, '');
                
                // Get referrer domain only, remove protocol and www
                let referrerDomain = '';
                try {
                    const refUrl = new URL(window.parent.document.referrer);
                    referrerDomain = refUrl.hostname.replace(/^www\./, ''); // Remove www.
                } catch (e) {
                    // If referrer is empty or invalid, leave as empty string
                    referrerDomain = '';
                }

                // Sanitize: allow only alphanumerics, "-", "_", "."
                const utmReferrer = encodeURIComponent(referrerDomain.replace(/[^a-zA-Z0-9_\-\.]/g, '_'));

                const baseUrl = 'https://console.inductiva.ai/api/register?utm_cta_origin=guide_' 
                    + origin + '&utm_path=' + encodeURIComponent(utmPath)
                    + '&utm_ref=' + utmReferrer;

                const url = params
                    ? baseUrl + '&' + params.slice(1)  // Remove the initial '?' and prepend '&'
                    : baseUrl;

                console.log("[BannerSmall] Opening URL:", url);
                window.open(url, '_blank');
            }
            </script>
</section>
<section id="bonus-adding-a-new-machine-for-comparison">
<h2>Bonus: Adding a New Machine for Comparison<a class="headerlink" href="#bonus-adding-a-new-machine-for-comparison" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#bonus-adding-a-new-machine-for-comparison'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>You may decide to test additional machines after completing the initial benchmark. For instance, let’s add the <code class="docutils literal notranslate"><span class="pre">n2-standard-32</span></code> machine to the existing benchmark and execute only this run.</p>
<p><strong>Steps to Add a New Machine</strong></p>
<ol class="arabic simple">
<li><p>Recreate the benchmark using the same name (<code class="docutils literal notranslate"><span class="pre">splishsplash-fluid-cube</span></code>).</p></li>
<li><p>Add a new run for the <code class="docutils literal notranslate"><span class="pre">n2-standard-32</span></code> machine type.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">num_repeats=2</span></code> to execute the run twice.</p></li>
</ol>
<p>Here’s the code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">import</span> <span class="nn">datetime</span>
</span><span id="line-2"><span class="kn">from</span> <span class="nn">inductiva</span> <span class="kn">import</span> <span class="n">benchmarks</span><span class="p">,</span> <span class="n">simulators</span><span class="p">,</span> <span class="n">resources</span>
</span><span id="line-3">
</span><span id="line-4"><span class="n">num_repeats</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="line-5">
</span><span id="line-6"><span class="n">max_idle_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</span><span id="line-7">
</span><span id="line-8"><span class="n">benchmark</span> <span class="o">=</span> <span class="n">benchmarks</span><span class="o">.</span><span class="n">Benchmark</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"splishsplash-fluid-cube"</span><span class="p">)</span> \
</span><span id="line-9">    <span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="n">simulators</span><span class="o">.</span><span class="n">SplishSplash</span><span class="p">(),</span>
</span><span id="line-10">             <span class="n">sim_config_filename</span><span class="o">=</span><span class="s2">"config.json"</span><span class="p">,</span>
</span><span id="line-11">             <span class="n">remote_assets</span><span class="o">=</span><span class="p">[</span><span class="s2">"splishsplash-input-dir"</span><span class="p">],</span>
</span><span id="line-12">             <span class="n">on</span><span class="o">=</span><span class="n">resources</span><span class="o">.</span><span class="n">MachineGroup</span><span class="p">(</span><span class="n">machine_type</span><span class="o">=</span><span class="s2">"n2-standard-32"</span><span class="p">,</span>
</span><span id="line-13">                                       <span class="n">num_machines</span><span class="o">=</span><span class="n">num_repeats</span><span class="p">,</span>
</span><span id="line-14">                                       <span class="n">max_idle_time</span><span class="o">=</span><span class="n">max_idle_time</span><span class="p">))</span> \
</span><span id="line-15">    <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">num_repeats</span><span class="o">=</span><span class="n">num_repeats</span><span class="p">)</span>
</span></code></pre></div>
</div>
<hr class="docutils"/>
<p>With this step, your benchmark analysis is complete, and you now have the tools
to continuously refine and expand your benchmarking experiments.</p>
<div class="cta-bar">
<div class="cta-text" style="text-align: center">
                    ...
                </div>
<button class="cta-button" id="login-btn-small" onclick="openInductivaRegister('benchmarks_bonus_add_machine')">...</button>
</div>
<script>
            function openInductivaRegister(origin) {
                // Current URL query string, including '?'
                const params = new URL(window.parent.location.href).search;
                const parentPath = new URL(window.parent.location.href).pathname;
                
                // Replace "/" with "_", remove leading/trailing underscores if any
                const utmPath = parentPath.replace(/\//g, '_').replace(/^_+|_+$/g, '');
                
                // Get referrer domain only, remove protocol and www
                let referrerDomain = '';
                try {
                    const refUrl = new URL(window.parent.document.referrer);
                    referrerDomain = refUrl.hostname.replace(/^www\./, ''); // Remove www.
                } catch (e) {
                    // If referrer is empty or invalid, leave as empty string
                    referrerDomain = '';
                }

                // Sanitize: allow only alphanumerics, "-", "_", "."
                const utmReferrer = encodeURIComponent(referrerDomain.replace(/[^a-zA-Z0-9_\-\.]/g, '_'));

                const baseUrl = 'https://console.inductiva.ai/api/register?utm_cta_origin=guide_' 
                    + origin + '&utm_path=' + encodeURIComponent(utmPath)
                    + '&utm_ref=' + utmReferrer;

                const url = params
                    ? baseUrl + '&' + params.slice(1)  // Remove the initial '?' and prepend '&'
                    : baseUrl;

                console.log("[BannerSmall] Opening URL:", url);
                window.open(url, '_blank');
            }
            </script>
</section>
</section>
</div><div class="flex justify-between items-center pt-6 mt-12 border-t border-border gap-4">
<div class="mr-auto">
<a class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors border border-input hover:bg-accent hover:text-accent-foreground py-2 px-4" href="why-benchmarks.html">
<svg class="mr-2 h-4 w-4" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<polyline points="15 18 9 12 15 6"></polyline>
</svg>
        Why Benchmark
      </a>
</div>
<div class="ml-auto">
<a class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors border border-input hover:bg-accent hover:text-accent-foreground py-2 px-4" href="monitor-live.html">
        Check Progress &amp; Results
        <svg class="ml-2 h-4 w-4" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<polyline points="9 18 15 12 9 6"></polyline>
</svg>
</a>
</div>
</div></div><aside class="hidden text-sm xl:block" id="right-sidebar">
<div class="sticky top-16 -mt-10 max-h-[calc(100vh-5rem)] overflow-y-auto pt-6 space-y-2"><p class="font-medium">On this page</p>
<ul>
<li><a :data-current="activeSection === '#what-youll-learn'" class="reference internal" href="#what-youll-learn">What You’ll Learn</a></li>
<li><a :data-current="activeSection === '#step-1-download-the-files'" class="reference internal" href="#step-1-download-the-files">Step 1: Download the Files</a></li>
<li><a :data-current="activeSection === '#step-2-configure-and-run-the-benchmark'" class="reference internal" href="#step-2-configure-and-run-the-benchmark">Step 2: Configure and Run the Benchmark</a></li>
<li><a :data-current="activeSection === '#step-3-refine-the-code'" class="reference internal" href="#step-3-refine-the-code">Step 3: Refine the Code</a><ul>
<li><a :data-current="activeSection === '#improve-data-readability'" class="reference internal" href="#improve-data-readability">Improve Data Readability</a><ul>
<li><a :data-current="activeSection === '#simplifying-the-code-with-set-default'" class="reference internal" href="#simplifying-the-code-with-set-default">1. Simplifying the Code with <code class="docutils literal notranslate"><span class="pre">set_default</span></code></a></li>
<li><a :data-current="activeSection === '#using-a-for-loop-for-machine-types'" class="reference internal" href="#using-a-for-loop-for-machine-types">2. Using a <code class="docutils literal notranslate"><span class="pre">for</span></code> Loop for Machine Types</a></li>
</ul>
</li>
<li><a :data-current="activeSection === '#optimizing-the-benchmark-program'" class="reference internal" href="#optimizing-the-benchmark-program">Optimizing the Benchmark Program</a></li>
</ul>
</li>
<li><a :data-current="activeSection === '#step-4-export-the-benchmark-data-to-a-file'" class="reference internal" href="#step-4-export-the-benchmark-data-to-a-file">Step 4: Export the Benchmark Data to a File</a></li>
<li><a :data-current="activeSection === '#bonus-adding-a-new-machine-for-comparison'" class="reference internal" href="#bonus-adding-a-new-machine-for-comparison">Bonus: Adding a New Machine for Comparison</a></li>
</ul>
</div>
</aside>
</main>
</div>
</div><footer class="py-6 border-t border-border md:py-0">
<div class="container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row">
<div class="flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0">
<p class="text-sm leading-loose text-center text-muted-foreground md:text-left">© 2025, Inductiva.AI Built with <a class="font-medium underline underline-offset-4" href="https://www.sphinx-doc.org" rel="noreferrer">Sphinx 8.2.3</a></p>
</div>
</div>
</footer>
</div><button :class="{'opacity-0 invisible' : !showScrollTop}" @click="window.scrollTo({top: 0, behavior: 'smooth'})" class="fixed bottom-8 right-8 p-2 z-10 rounded-sm bg-gray-700 text-xs text-white transition-all duration-1000 hover:bg-gray-950 focus:bg-gray-950" id="scrolltop" x-cloak="">
<svg aria-hidden="true" class="inline fill-current mb-[2px]" height="14" viewbox="0 96 960 960" width="14" xmlns="http://www.w3.org/2000/svg">
<path d="M450 896V370L202 618l-42-42 320-320 320 320-42 42-248-248v526h-60Z"></path>
</svg>
  Back to top
</button>
<script src="../_static/documentation_options.js?v=5929fcd5"></script>
<script src="../_static/doctools.js?v=9bcbadda"></script>
<script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
<script>let toggleHintShow = 'Click to show';</script>
<script>let toggleHintHide = 'Click to hide';</script>
<script>let toggleOpenOnPrint = 'true';</script>
<script src="../_static/togglebutton.js?v=4a39c7ea"></script>
<script defer="defer" src="../_static/theme.js?v=073f68d9"></script>
<script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
<script src="../_static/banner_texts.js?v=f51547da"></script>
<script src="../_static/env.js?v=93ff707a"></script>
<script src="../_static/discord.js?v=ecda6183"></script>
<script src="../_static/gtm_func.js?v=307a5f95"></script>
<script src="../_static/move_back_to_top.js?v=07fa9ec3"></script>
</body>
</html>