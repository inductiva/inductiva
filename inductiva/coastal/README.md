# Coastal area scenario

This scenario simulates waves propagating in a coastal area represented by a
bathymetric profile (i.e., the map of depths of the sea bottom as a function
of spatial coordinates x, y). Waves are injected into the domain from one of the
boundaries of the simulation with a given amplitude and period. The simulation
is performed using the [SWASH](https://swash.sourceforge.io/) simulator.

### Example

Note: You can follow this example in a notebook or run the script `test.py`
available in this folder, that contains all the code snippets exhibited here.

Start by creating or loading a bathymetry. This can be done e.g. by reading an
[ASCII XYZ file](https://emodnet.ec.europa.eu/sites/emodnet.ec.europa.eu/files/public/20171127_DTM_exchange_format_specification_v1.6.pdf),
a standard format for bathymetry data (for examples, see e.g. the [European Marine Observation and Data Network](https://emodnet.ec.europa.eu/geoviewer/#!/)).
Here we shall use a artificial bathymetry, randomly generated by our code.

We start by generating a random bathymetry.
```python
import inductiva

bathymetry = inductiva.coastal.Bathymetry.from_random_depths(
        x_range=(0, 100),
        y_range=(0, 100),
        x_num=100,
        y_num=100,
        max_depth=50)
```

This bathymetry is defined in a 50x50 grid, that represent a domain 100 m
wide and long. It can be inspected by plotting it.

```python
bathymetry.plot()
```

![Raw bathymetry.](resources/media/bathymetry_random.png)

The bathymetry is ready to be used in a simulation scenario. In this case, we set
the wave source location to the west boundary of the domain (i.e. the lower x
boundary), with a wave amplitude of 5 m and a wave period of 5.5 s:

```python
scenario = inductiva.coastal.CoastalArea(bathymetry=bathymetry,
                                         wave_source_location="W",
                                         wave_amplitude=5,
                                         wave_period=5.5)
```

Once the scenario is created, run the simulation as follows:

```python
task = scenario.simulate(simulation_time=30, output_time_step=1)

output = task.get_output()
```

The user can specify the total simulation time and the time step between outputs
(all in seconds).

To visualize the results, we can generate and save a movie of the simulation:

```python
output.render(movie_path = "movie_path.mp4")
```

![Coastal area simulation.](resources/media/bathymetry_velocities.mp4)